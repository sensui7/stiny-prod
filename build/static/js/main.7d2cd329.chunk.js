(this.webpackJsonpstiny=this.webpackJsonpstiny||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(15),i=a.n(s),r=(a(31),a(9)),c=a.n(r),o=a(11),u=a(4),m=a(5),d=a(7),p=a(6),h=(a(56),a(3)),f=a.n(h),b=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleClick=function(t){e.props.menuBarCallBack(t.target.text)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=document.querySelector(".tabs");f.a.Tabs.init(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("ul",{className:"tabs"},l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{onClick:this.handleClick,href:"#cooking"},"Cooking")),l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{className:"active",onClick:this.handleClick,href:"#home"},"Home")),l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{onClick:this.handleClick,href:"#photos"},"Photos")))))}}]),a}(l.a.Component),v=a(23),g=a.n(v),E=a(26),k=a.n(E),y=a(16),N=a.n(y),w=a(27),C=a.n(w),S=a(28),A=a.n(S),R=a(8),j=a.n(R),L={coverTrigger:!1},x=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleDelete=function(){if(void 0!==n.props.album&&n.props.album!==oe){var e={albumName:n.props.album,link:n.state.picture,idtoken:n.props.token};j.a.post("/deletePhoto",e).then((function(e){n.props.deleteCallBack()}),(function(e){console.log(e)}))}},n.state={picture:"",caption:"",date:""},n.myRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.myRef.current.scrollTo(0,0);var n=document.querySelectorAll(".delete-pic");f.a.Dropdown.init(n,L)}},{key:"componentDidMount",value:function(){var e=document.querySelectorAll(".delete-pic");f.a.Dropdown.init(e,L)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.myRef,id:"modal1",className:"modal",style:{width:"75%",maxHeight:"100%",backgroundColor:"rgba(255, 255, 255, 0.90)",position:"absolute"}},l.a.createElement("div",{className:"modal-content",style:{}},l.a.createElement("div",{className:"row"},this.props.album!==oe?l.a.createElement("div",null,l.a.createElement("a",{href:"#!",className:"left waves-effect btn"},"Edit"),l.a.createElement("a",{className:"dropdown-trigger btn left red delete-pic",href:"#!","data-target":"dropdown1"},"Delete"),l.a.createElement("ul",{id:"dropdown1",className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:this.handleDelete},"Confirm")))):null,l.a.createElement("a",{href:"#!",className:"right modal-close waves-effect waves-green btn"},"Exit")),l.a.createElement("h4",null,this.state.caption),l.a.createElement("p",null,this.state.date),l.a.createElement("img",{alt:"preview",style:{width:"100%",height:"100%"},src:this.state.picture})))}}]),a}(l.a.Component),B={duration:200,dist:-50,numVisible:5},O={opacity:0},D=["Victorian Belle","Peacock Lane","Zoolights","Fire on the Mountain","Steven's House"],M=["2018","2018","2018","2019","2020"],P=function(e,t,a,n,l){e.push({picture:t,alt:a,caption:n,date:l})},T=[];P(T,A.a,A.a,D[4],M[4]),P(T,g.a,g.a,D[0],M[0]),P(T,k.a,k.a,D[1],M[1]),P(T,N.a,N.a,D[2],M[2]),P(T,C.a,C.a,D[3],M[3]);var I=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(e){var t=e.target.attributes.alt.value,a=e.target.attributes[0].value,l=e.target.attributes[1].value;n.viewRef.current.setState({picture:t,date:l,caption:a}),n.state.modal.open()},n.deleteCallBack=function(){n.state.modal.close(),n.props.setAlbum(n.props.album)},n.state={picture:g.a,caption:"",date:"",modal:null,defPhotos:T},n.viewRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props!==e&&0!==this.props.photos.length){var t=document.querySelector(".carousel"),a=this.props.photos.length;B.numVisible=a%2===0?a-1:a,f.a.Carousel.init(t,B)}if(0===this.props.photos.length){var n=document.querySelector(".carousel");B.numVisible=5,f.a.Carousel.init(n,B)}}},{key:"componentDidMount",value:function(){var e=document.querySelector(".carousel"),t=f.a.Carousel.init(e,B),a=document.getElementById("modal1"),n=f.a.Modal.init(a,O);this.setState({modal:n,carousel:t})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{height:"100%"}},l.a.createElement(x,{current:this.state.picture,caption:this.state.caption,date:this.state.date,album:this.props.album,deleteCallBack:this.deleteCallBack,token:this.props.idtoken,ref:this.viewRef}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h2",{style:{marginTop:"5%",marginBottom:"5%"}},this.props.album===oe||void 0===this.props.album?"Album 1":this.props.album+" Album")),l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"carousel",style:{height:"600px"}},this.props.photos.map((function(t){return l.a.createElement("a",{className:"carousel-item",href:"#!"},l.a.createElement("img",{"data-caption":t.caption,"data-date":t.date,alt:t.link,src:t.link,onClick:e.handleClick}))})),this.props.album===oe?T.map((function(t){return l.a.createElement("a",{className:"carousel-item",href:"#!",key:t.picture},l.a.createElement("img",{"data-caption":t.caption,"data-date":t.date,alt:t.alt,src:t.picture,onClick:e.handleClick}))})):null))))}}]),a}(l.a.Component),_=a(21),q=a.n(_),F=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=n.createAlbumRef.current,t={idtoken:n.props.token,email:n.props.email,albumName:n.createAlbumRef.current.value};e.classList.contains("valid")&&e.classList.remove("valid"),e.classList.contains("invalid")&&e.classList.remove("invalid");var a=n.props.updateList;j.a.post("/createAlbum",t).then((function(t){e.classList.toggle("valid"),a(),console.log(t)})).catch((function(t){e.classList.toggle("invalid"),console.log(t)}))},n.handleKeyDown=function(e){"Enter"!==e.key?(n.createAlbumRef.current.classList.remove("valid"),n.createAlbumRef.current.classList.remove("invalid")):n.handleSubmit()},n.myRef=l.a.createRef(),n.createAlbumRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.myRef.current.scrollTo(0,0)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.myRef,id:"modal2",className:"modal",style:{marginTop:"30%",paddingTop:"20%",backgroundColor:"rgb(255, 255, 255, 0.95"}},l.a.createElement("div",{className:"modal-content",style:{width:"100%"}},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect",style:{display:"inline-block"}},"Close"),l.a.createElement("h4",null,"Add Album"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{ref:this.createAlbumRef,id:"albumName",type:"text",placeholder:"e.g. Memories",onKeyDown:this.handleKeyDown}),l.a.createElement("label",{htmlFor:"albumName"},"Album Name"),l.a.createElement("span",{className:"helper-text","data-error":"Album exists / is invalid.","data-success":"Album created!"}))),l.a.createElement("a",{href:"#!",onClick:this.handleSubmit,className:"waves-effect waves-light btn"},l.a.createElement("i",{className:"material-icons left"},"cloud"),"Submit")))}}]),a}(l.a.Component),K={"Content-Type":"multipart/form-data"},z=(l.a.Component,a(29)),H=a.n(z),U=a(45),V=a.n(U),W={opacity:0},G={coverTrigger:!1,closeOnClick:!1},J=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).closeModals=function(){n.state.addAlbumModal.close()},n.handleClickAddAlbum=function(){n.state.addAlbumModal.open()},n.handleClickAddPhoto=function(){n.state.addPhotoModal.open(),j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albums:e.data})}))},n.handleBulk=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.props.triggerBulk(e.data)}));case 2:case"end":return e.stop()}}),e)}))),n.handleClickDisplayAlbum=function(e,t){n.props.setAlbumCallBack(t)},n.onSuccess=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getBasicProfile(),l=a.getImageUrl(),s=a.getName(),i=a.getEmail(),n.setState({isLoggedIn:!n.state.isLoggedIn,profilePicture:l,name:s,email:i,token:t.getAuthResponse().id_token}),n.createAlbumRef.current.classList.remove("disabled"),n.deleteAlbumRef.current.classList.remove("disabled"),n.displayAlbumRef.current.classList.remove("disabled"),n.addPhotosBulkRef.current.classList.remove("disabled"),n.props.getAuth({idtoken:n.state.token,email:n.state.email}),e.next=12,j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albumsForDisplay:e.data})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFailure=function(e){console.log(e)},n.logout=function(){n.setState({isLoggedIn:!n.state.isLoggedIn,profilePicture:H.a,name:"",email:""}),n.createAlbumRef.current.classList.add("disabled"),n.deleteAlbumRef.current.classList.add("disabled"),n.displayAlbumRef.current.classList.add("disabled"),n.addPhotosBulkRef.current.classList.add("disabled"),n.props.removeAuthCallBack()},n.updateListCallBack=function(){j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albumsForDisplay:e.data})}))},n.state={isLoggedIn:!1,profilePicture:H.a,name:"",email:"",addAlbumModal:null,addPhotoModal:null,token:"",albums:[],albumsForDisplay:[]},n.createAlbumRef=l.a.createRef(),n.deleteAlbumRef=l.a.createRef(),n.displayAlbumRef=l.a.createRef(),n.addPhotosBulkRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.state.isLoggedIn||(this.displayAlbumRef.current.classList.add("disabled"),this.deleteAlbumRef.current.classList.add("disabled"),this.createAlbumRef.current.classList.add("disabled"),this.addPhotosBulkRef.current.classList.add("disabled"));var e=document.getElementById("modal2"),t=f.a.Modal.init(e,W),a=document.getElementById("modal3"),n=f.a.Modal.init(a,W),l=document.getElementById("display");f.a.Dropdown.init(l,G),this.setState({addAlbumModal:t,addPhotoModal:n});var s={onCloseStart:this.closeModals},i=document.querySelectorAll(".sidenav");f.a.Sidenav.init(i,s)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("nav",{className:"nav-extended"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#!",className:"logo paris",onClick:this.handleHome,style:{cursor:"pointer"}},"Stiny"),l.a.createElement("a",{href:"#!","data-target":"slide-out",className:"sidenav-trigger left waves-effect"},l.a.createElement("i",{style:{fontSize:"300%",color:"black"},className:"material-icons"},"menu")))),l.a.createElement("ul",{id:"slide-out",className:"sidenav"},l.a.createElement("li",null,l.a.createElement("div",{className:"user-view"},l.a.createElement("div",{className:"background"},l.a.createElement("img",{alt:"office-background",src:V.a})),l.a.createElement("a",{href:"#user"},l.a.createElement("img",{alt:"profile",className:"circle",src:this.state.profilePicture})),l.a.createElement("a",{href:"#name"},l.a.createElement("span",{className:"white-text name"},this.state.name)),l.a.createElement("a",{href:"#email"},l.a.createElement("span",{className:"white-text email"},this.state.email)))),l.a.createElement("li",null,l.a.createElement("a",{ref:this.createAlbumRef,className:"waves-effect",href:"#!",disabled:!this.state.isLoggedIn,onClick:this.handleClickAddAlbum},l.a.createElement("i",{className:"material-icons"},"book"),"Create Album"),l.a.createElement(F,{token:this.state.token,email:this.state.email,updateList:this.updateListCallBack})),l.a.createElement("li",null,l.a.createElement("a",{ref:this.deleteAlbumRef,className:"waves-effect",href:"#!"},l.a.createElement("i",{className:"material-icons"},"delete"),"Delete Album")),l.a.createElement("li",null,l.a.createElement("a",{ref:this.displayAlbumRef,className:"dropdown-trigger waves-effect","data-target":"dropdownDisplay",id:"display",href:"#!",disabled:!this.state.isLoggedIn},l.a.createElement("i",{className:"material-icons"},"tv"),"Display Album"),l.a.createElement("ul",{id:"dropdownDisplay",className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",className:"waves-effect",onClick:function(t){return e.handleClickDisplayAlbum(t,oe)}},l.a.createElement("i",{className:"material-icons"},"filter_vintage"),"Default")),this.state.albumsForDisplay.map((function(t){return l.a.createElement("li",null,l.a.createElement("a",{href:"#!",className:"waves-effect",onClick:function(a){return e.handleClickDisplayAlbum(a,t)}},l.a.createElement("i",{className:"material-icons"},"filter_vintage"),t))})))),l.a.createElement("li",null,l.a.createElement("a",{ref:this.addPhotosBulkRef,className:"waves-effect",href:"#!",onClick:this.handleBulk},l.a.createElement("i",{className:"material-icons"},"insert_photo"),"Add Photos")),l.a.createElement("li",null,l.a.createElement("div",{className:"divider"})),l.a.createElement("li",null,l.a.createElement(q.a,{className:"google-button",clientId:"844946981534-vkdij9ke3polifnu5qsveogtlp2etuj9.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.onSuccess,onFailure:this.onFailure,cookiePolicy:"single_host_origin",disabled:this.state.isLoggedIn}),l.a.createElement(_.GoogleLogout,{className:"google-button",clientId:"844946981534-vkdij9ke3polifnu5qsveogtlp2etuj9.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:this.logout,disabled:!this.state.isLoggedIn})),l.a.createElement("li",null,l.a.createElement("a",{href:"#!",className:"subheader"},"Built With Materialize CSS"))))}}]),a}(l.a.Component),Z=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s1 m1 l4"}),l.a.createElement("div",{className:"col s10 m10 l4"},l.a.createElement("img",{style:{width:"100%"},alt:"preview",className:"preview",src:N.a})),l.a.createElement("div",{className:"col s1 m1 l4"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s1 m2"}),l.a.createElement("div",{className:"col s10 m8"},l.a.createElement("p",{className:"bio"},"Hi!"),l.a.createElement("p",{className:"bio"},"My name is Steven, and I developed this website for my girlfriend, Ciny, and me to use for several things. We thought it'd be a great idea to save memorable photos and cooking recipes somewhere we can easily access. This website's source code can be found below: "),l.a.createElement("a",{href:"https://github.com/sensui7/stiny-prod"},"GitHub Repository")),l.a.createElement("div",{className:"col s1 m2"})))}}]),a}(l.a.Component),$=a(22),Q=sessionStorage.getItem("content"),X={coverTrigger:!1},Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleEditorChange=function(e){var t;t=e.target.getContent(),sessionStorage.setItem("content",t),n.setState({content:e.target.getContent()})},n.handleSubmit=function(){var e=n.recipeNameRef.current.value;if(""===e)return n.recipeNameRef.current.classList.add("invalid"),void n.setState({addRecipeMessage:"Please enter a recipe name."});n.recipeNameRef.current.classList.remove("valid"),n.recipeNameRef.current.classList.remove("invalid");var t={recipeName:e,data:n.state.content,idtoken:n.props.idtoken};j.a.post("/addRecipe",t).then((function(e){n.recipeNameRef.current.classList.add("valid"),j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({recipes:e})}),(function(e){}))}),(function(e){n.recipeNameRef.current.classList.add("invalid"),404===e.response.status?n.setState({addRecipeMessage:"Please connect to the internet to use this feature."}):400===e.response.status?n.setState({addRecipeMessage:"Account login status expired. Please logout and login."}):500===e.response.status?n.setState({addRecipeMessage:"Recipe name already exists."}):403===e.response.status&&n.setState({addRecipeMessage:"Only admins are authorized to add a recipe."})}))},n.handleKeydown=function(e){n.recipeNameRef.current.classList.remove("valid"),n.recipeNameRef.current.classList.remove("invalid")},n.handleDelete=function(e,t){var a={recipeName:t,idtoken:n.props.idtoken};j.a.post("/deleteRecipe",a).then((function(e){j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({recipes:e})}),(function(e){}))}),(function(e){console.log(e)}))},n.recipeNameRef=l.a.createRef(),n.editorRef=l.a.createRef(),n.submitRef=l.a.createRef(),n.state={addRecipeMessage:"",recipes:[],content:""},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){""!==this.props.idtoken?(this.submitRef.current.classList.remove("disabled"),document.querySelectorAll(".recipes").forEach((function(e){return e.classList.remove("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.remove("disabled")}))):(this.submitRef.current.classList.add("disabled"),document.querySelectorAll(".recipes").forEach((function(e){return e.classList.add("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.add("disabled")})));var n=document.querySelectorAll(".collapsible");f.a.Collapsible.init(n);var l=document.querySelectorAll(".recipes");f.a.Dropdown.init(l,X)}},{key:"componentDidMount",value:function(){var e=this;this.setState({content:Q});var t=document.querySelectorAll(".collapsible");f.a.Collapsible.init(t);var a=document.querySelectorAll(".recipes");f.a.Dropdown.init(a,X);var n=""!==this.props.idtoken;j.a.get("/getAllRecipes",{params:{idtoken:this.props.idtoken}}).then((function(t){e.setState({recipes:t}),n||(document.querySelectorAll(".recipes").forEach((function(e){return e.classList.add("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.add("disabled")})))}),(function(e){}))}},{key:"render",value:function(){var e=this,t=[];return 0!==this.state.recipes.length&&this.state.recipes.data.forEach((function(e){t.push(e)})),l.a.createElement("div",{className:"row"},l.a.createElement("ul",{className:"collapsible popout"},l.a.createElement("li",null,l.a.createElement("div",{className:"collapsible-header"},l.a.createElement("i",{className:"material-icons"},"playlist_add"),"Add Recipe"),l.a.createElement("div",{className:"collapsible-body"},l.a.createElement($.a,{ref:this.editorRef,initialValue:Q||null,apiKey:"p234ptga2jzgn5mia4hnruilh2zzuhfchjd7ja98rwu5p6g4",init:{contextmenu:!1,browser_spellcheck:!0,height:500,selector:"textarea",plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | fontselect | fontsize | forecolor | backcolor | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | help",paste_enable_default_filters:!1,paste_word_valid_elements:"b,strong,i,em,h1,h2,h3,h4,h5"},onChange:this.handleEditorChange}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s3"}),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{ref:this.recipeNameRef,id:"recipename",type:"text",onKeyDown:this.handleKeydown}),l.a.createElement("label",{htmlFor:"recipename"},"Recipe Name"),l.a.createElement("span",{className:"helper-text","data-error":this.state.addRecipeMessage,"data-success":"Recipe created!"})),l.a.createElement("div",{className:"col s3"})),l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:this.handleSubmit,ref:this.submitRef},"Submit",l.a.createElement("i",{className:"material-icons right"},"send")))),t.map((function(t){return l.a.createElement("li",null,l.a.createElement("div",{className:"collapsible-header"},l.a.createElement("i",{className:"material-icons"},"menu_book"),t.name),l.a.createElement("div",{className:"collapsible-body instructions"},l.a.createElement("a",{className:"dropdown-trigger btn right red recipes",href:"#!","data-target":t.name},"Delete Recipe"),l.a.createElement("a",{className:"btn right waves-effect edit-recipes",href:"#!","data-target":t.name,onClick:function(a){return e.props.triggerEdit(a,t.data,t.name)}},"Edit Recipe"),l.a.createElement("ul",{id:t.name,className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:function(a){return e.handleDelete(a,t.name)}},"Confirm"))),l.a.createElement("div",{className:"recipe-display",dangerouslySetInnerHTML:{__html:t.data}})))}))))}}]),a}(l.a.Component),ee=a(47),te=a.n(ee),ae=a(17),ne=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onDrop=function(e){n.setState({pictures:n.state.pictures.concat(e),uploaderKey:n.state.uploaderKey+1})},n.handleRemove=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({pictures:n.state.pictures.filter((function(e){return e!==a})),uploaderKey:n.state.uploaderKey+1});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleSubmit=function(){var e={dates:document.getElementsByClassName("date-input"),captions:document.getElementsByClassName("desc-input"),pictures:n.state.pictures};n.props.sendData(e)},n.state={pictures:[],uploaderKey:0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(te.a,{withIcon:!0,buttonText:"Choose Images",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".tif",".tiff"],maxFileSize:5242880,key:this.state.uploaderKey}),0===this.state.pictures.length?null:this.state.pictures.map((function(t,a){return l.a.createElement("div",{className:"row",key:a},l.a.createElement("div",{className:"col l1"},l.a.createElement(ae.Button,{onClick:function(a){return e.handleRemove(a,t)},style:{marginTop:"100%"},className:"btn-floating red waves-effect"},l.a.createElement("i",{className:"material-icons"},"remove"))),l.a.createElement("div",{className:"col l5"},l.a.createElement("img",{alt:"#!",style:{maxWidth:"50%",maxHeight:"50%"},src:URL.createObjectURL(t)})),l.a.createElement("div",{className:"col l6"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:a+" date",type:"text",className:"date-input"}),l.a.createElement("label",{htmlFor:"date"},"Date")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:a+" desc",type:"text",className:"desc-input"}),l.a.createElement("label",{htmlFor:"desc"},"Caption"))))})),l.a.createElement(ae.Button,{className:"waves-effect",onClick:this.handleSubmit},"Submit"))}}]),a}(l.a.Component),le=a(48),se=a.n(le),ie={"Content-Type":"multipart/form-data"},re=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSelect=function(e){n.setState({selectedAlbum:e.target.value,message:""})},n.sendData=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({message:""}),""!==n.state.selectedAlbum){e.next=4;break}return n.setState({message:"Please make sure an album is selected."}),e.abrupt("return");case 4:if(0!==t.pictures.length){e.next=8;break}return e.next=7,n.setState({message:"Please add some photos before uploading them!"});case 7:return e.abrupt("return");case 8:return e.next=10,n.setState({loading:!0});case 10:a=0;case 11:if(!(a<t.pictures.length)){e.next=27;break}return(l=new FormData).append("idtoken",n.props.idtoken),l.append("albumName",n.state.selectedAlbum),l.append("caption",t.captions[a].value),l.append("date",t.dates[a].value),l.append("image",t.pictures[a]),e.next=20,j.a.post("/addPhoto",l,{headers:ie}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",200);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return 403===e.response.status?n.setState({message:"Could not add photo! Album does not exist."}):400===e.response.status?n.setState({message:"Could not add photo! Try relogging into your account."}):404===e.response.status&&n.setState({message:"Please connect to the internet to use this feature."}),e.response.status}));case 20:if(200===e.sent){e.next=24;break}return n.setState({loading:!1}),e.abrupt("return");case 24:++a,e.next=11;break;case 27:n.setState({loading:!1,message:"Successfully added photos to "+n.state.selectedAlbum+" album!"}),n.props.setAlbumCallBack(n.props.album);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={selectedAlbum:"",message:"",loading:!1},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){if(e.albumsList!==this.props.albumsList){var n=document.querySelectorAll("select");f.a.FormSelect.init(n)}}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{id:"bulk",className:"modal arg"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h4",null,"Add Photos"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{defaultValue:this.state.selectedAlbum,onChange:this.handleSelect},l.a.createElement("option",{value:"",disabled:!0},"Choose Album"),this.props.albumsList?this.props.albumsList.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})):null))),l.a.createElement(ne,{sendData:this.sendData}),l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(se.a,{size:10,color:"#123abc",loading:this.state.loading}),l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:"helper-text"},this.state.message)))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"Exit"))))}}]),a}(l.a.Component),ce=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={idtoken:n.props.idtoken,recipeName:n.props.recipeName,data:n.editorRef.current.editor.getContent()},e.next=3,j.a.post("/updateRecipe",t).then((function(e){n.props.recipeEditCallback()}),(function(e){console.log("Unsuccessful update")}));case 3:case"end":return e.stop()}}),e)}))),n.editorRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.recipeToEdit;return l.a.createElement("div",{id:"edit-recipe",className:"modal arg"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h4",null,"Edit Recipe"),l.a.createElement($.a,{key:e,ref:this.editorRef,value:e,apiKey:"p234ptga2jzgn5mia4hnruilh2zzuhfchjd7ja98rwu5p6g4",init:{contextmenu:!1,browser_spellcheck:!0,height:500,selector:"textarea",plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | fontselect | fontsize | forecolor | backcolor | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | help",paste_enable_default_filters:!1,paste_word_valid_elements:"b,strong,i,em,h1,h2,h3,h4,h5"}}),l.a.createElement("br",null),l.a.createElement(ae.Button,{waves:"light",onClick:this.handleSubmit},"Submit Changes")),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"Exit")))}}]),a}(l.a.Component),oe=(a(127),a(128),"default"),ue=["Please login to use this feature.","No album was found with any photos.","Make sure you're connected to the internet."],me=1,de=2,pe=3,he=["Photos","Cooking","Home"],fe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authCallBack=function(e){n.setState({idtoken:e.idtoken,email:e.email,searchStatus:""})},n.removeAuthCallBack=function(){n.setState({idtoken:"",email:"",searchStatus:""})},n.setAlbumCallBack=function(e){j.a.get("/albumPhotos",{params:{idtoken:n.state.idtoken,albumName:e}}).then((function(t){t.data[0]&&t.data[0].album&&0!==t.data[0].album.length?n.setState({currAlbum:e,photos:t.data[0].album,searchStatus:""}):n.setState({currAlbum:oe,photos:[],searchStatus:ue[1]})}),(function(e){400===e.response.status?n.setState({searchStatus:ue[0]}):404===e.response.status&&n.setState({searchStatus:ue[2]})}))},n.clearCallback=function(){n.setState({searchStatus:""})},n.handleHome=function(){n.setState({currentTab:me,pageName:he[2]})},n.menuBarCallBack=function(e){var t=null;e===he[0]?(e=de,t=0):e===he[1]?(e=pe,t=1):e===he[2]&&(e=me,t=2),n.setState({currentTab:e,pageName:he[t]})},n.triggerEdit=function(){var e=Object(o.a)(c.a.mark((function e(t,a,l){var s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=document.getElementById("edit-recipe"),i=f.a.Modal.init(s),e.next=4,n.setState({recipeToEdit:a,recipeName:l,editModal:i});case 4:i.open();case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.recipeEditCallback=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({forceKey:n.state.forceKey+1})}),(function(e){}));case 2:n.state.editModal.close();case 3:case"end":return e.stop()}}),e)}))),n.triggerBulk=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.getElementById("bulk"),l=f.a.Modal.init(a),e.next=4,n.setState({albumsList:t});case 4:l.open();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={idtoken:"",email:"",currAlbum:oe,photos:[],searchStatus:"",currentTab:me,pageName:he[2],recipeToEdit:"",recipeName:"",editModal:null,forceKey:0,albumsList:[]},n}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"App",style:{background:"#FFFAFA"}},l.a.createElement(J,{getAuth:this.authCallBack,removeAuthCallBack:this.removeAuthCallBack,setAlbumCallBack:this.setAlbumCallBack,album:this.state.currAlbum,triggerBulk:this.triggerBulk}),l.a.createElement(b,{menuBarCallBack:this.menuBarCallBack}),this.state.currentTab===de?l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m1 l3"}),l.a.createElement("div",{className:"col s12 l6 m10"},l.a.createElement(I,{setAlbum:this.setAlbumCallBack,idtoken:this.state.idtoken,email:this.state.email,album:this.state.currAlbum,photos:this.state.photos})),l.a.createElement("div",{className:"col m1 l3"}))):null,this.state.currentTab===me?l.a.createElement(Z,null):null,this.state.currentTab===pe?l.a.createElement(Y,{idtoken:this.state.idtoken,triggerEdit:this.triggerEdit,key:this.state.forceKey}):null,l.a.createElement(ce,{recipeToEdit:this.state.recipeToEdit,idtoken:this.state.idtoken,recipeName:this.state.recipeName,recipeEditCallback:this.recipeEditCallback}),l.a.createElement(re,{albumsList:this.state.albumsList,idtoken:this.state.idtoken,setAlbumCallBack:this.setAlbumCallBack}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},16:function(e,t,a){e.exports=a.p+"static/media/3.86e83c97.jpg"},23:function(e,t,a){e.exports=a.p+"static/media/1.8d68a31f.jpg"},26:function(e,t,a){e.exports=a.p+"static/media/2.6e2d9591.jpg"},27:function(e,t,a){e.exports=a.p+"static/media/4.51c24f85.jpg"},28:function(e,t,a){e.exports=a.p+"static/media/5.7baa8c77.jpg"},29:function(e,t,a){e.exports=a.p+"static/media/default.3ab90553.png"},31:function(e,t,a){},45:function(e,t,a){e.exports=a.p+"static/media/office.f642206b.jpg"},50:function(e,t,a){e.exports=a(129)},56:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.7d2cd329.chunk.js.map