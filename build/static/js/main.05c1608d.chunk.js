(this.webpackJsonpstiny=this.webpackJsonpstiny||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(15),i=a.n(s),r=(a(31),a(3)),c=a.n(r),o=a(10),u=a(5),d=a(6),m=a(8),p=a(7),h=(a(56),a(4)),f=a.n(h),b=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleClick=function(t){e.props.menuBarCallBack(t.target.text)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=document.querySelector(".tabs");f.a.Tabs.init(e),this.photosRef=l.a.createRef()}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("ul",{className:"tabs"},l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{onClick:this.handleClick,href:"#cooking"},"Cooking")),l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{className:"active",onClick:this.handleClick,href:"#home"},"Home")),l.a.createElement("li",{className:"tab col s4"},l.a.createElement("a",{onClick:this.handleClick,href:"#photos",ref:this.photosRef},"Photos")))))}}]),a}(l.a.Component),v=a(23),g=a.n(v),E=a(26),k=a.n(E),y=a(16),N=a.n(y),w=a(27),C=a.n(w),R=a(28),A=a.n(R),S=a(9),j=a.n(S),O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=Object(o.a)(c.a.mark((function e(){var t,a,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.editDateRef.current.value,a=n.editCaptionRef.current.value,l={albumName:n.props.albumName,idtoken:n.props.idtoken,link:n.props.link,date:t,caption:a},s=n.props.handleOnEdit,e.next=6,j.a.post("/editPhoto",l).then((function(e){s(t,a)}),(function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)}))),n.editCaptionRef=l.a.createRef(),n.editDateRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.editCaptionRef.current.value=this.props.caption,this.editDateRef.current.value=this.props.date}},{key:"render",value:function(){return l.a.createElement("div",{id:"modal-edit-photo",className:"modal arg"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("a",{href:"#!",className:"waves-effect",style:{display:"inline-block"},onClick:this.props.closeModal},"Close"),l.a.createElement("h4",null,"Edit Photo Descriptions"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{ref:this.editCaptionRef,placeholder:"Trip to the beach!",id:"edit-caption",type:"text"}),l.a.createElement("label",{htmlFor:"edit-caption",className:"active"},"Caption"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{ref:this.editDateRef,placeholder:"12/08/2018",id:"edit-date",type:"text"}),l.a.createElement("label",{htmlFor:"edit-date",className:"active"},"Date"))),l.a.createElement("a",{href:"#!",onClick:this.handleSubmit,className:"waves-effect waves-light btn"},l.a.createElement("i",{className:"material-icons left"},"create"),"Submit")))}}]),a}(l.a.Component),x={coverTrigger:!1},L=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).closeModal=function(){n.state.editPhotoModal.close()},n.handleEdit=Object(o.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("modal-edit-photo"),a=f.a.Modal.init(t),n.setState({editPhotoModal:a}),a.open();case 4:case"end":return e.stop()}}),e)}))),n.handleDelete=function(){if(void 0!==n.props.album&&n.props.album!==me){var e={albumName:n.props.album,link:n.state.picture,idtoken:n.props.token};j.a.post("/deletePhoto",e).then((function(e){n.props.deleteCallBack()}),(function(e){console.log(e)}))}},n.handleOnEdit=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.state.editPhotoModal.close();case 2:n.props.handleOnEdit(t,a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={picture:"",caption:"",date:"",editPhotoModal:null},n.myRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){void 0===this.state.caption&&void 0===this.state.date&&this.setState({caption:t.caption,date:t.date}),this.myRef.current.scrollTo(0,0);var n=document.querySelectorAll(".delete-pic");f.a.Dropdown.init(n,x)}},{key:"componentDidMount",value:function(){var e=document.querySelectorAll(".delete-pic");f.a.Dropdown.init(e,x)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.myRef,id:"modal1",className:"modal",style:{width:"75%",maxHeight:"100%",backgroundColor:"rgba(255, 255, 255, 0.90)",position:"absolute"}},l.a.createElement(O,{closeModal:this.closeModal,idtoken:this.props.token,caption:this.state.caption,date:this.state.date,link:this.state.picture,albumName:this.props.album,handleOnEdit:this.handleOnEdit}),l.a.createElement("div",{className:"modal-content",style:{}},l.a.createElement("div",{className:"row"},this.props.album!==me?l.a.createElement("div",null,l.a.createElement("a",{onClick:this.handleEdit,href:"#!",className:"left waves-effect btn"},"Edit"),l.a.createElement("a",{className:"dropdown-trigger btn left red delete-pic",href:"#!","data-target":"dropdown1"},"Delete"),l.a.createElement("ul",{id:"dropdown1",className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:this.handleDelete},"Confirm")))):null,l.a.createElement("a",{href:"#!",className:"right modal-close waves-effect waves-green btn"},"Exit")),l.a.createElement("h4",null,this.state.caption),l.a.createElement("p",null,this.state.date),l.a.createElement("img",{alt:"preview",style:{width:"100%",height:"100%"},src:this.state.picture})))}}]),a}(l.a.Component),B={duration:200,dist:-50,numVisible:5},D={opacity:0},M=["Victorian Belle","Peacock Lane","Zoolights","Fire on the Mountain","Steven's House"],P=["2018","2018","2018","2019","2020"],T=function(e,t,a,n,l){e.push({picture:t,alt:a,caption:n,date:l})},I=[];T(I,A.a,A.a,M[4],P[4]),T(I,g.a,g.a,M[0],P[0]),T(I,k.a,k.a,M[1],P[1]),T(I,N.a,N.a,M[2],P[2]),T(I,C.a,C.a,M[3],P[3]);var _=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(e){var t=e.target.attributes.alt.value,a=e.target.attributes[0].value,l=e.target.attributes[1].value;n.viewRef.current.setState({picture:t,date:l,caption:a}),n.state.modal.open()},n.deleteCallBack=function(){n.state.modal.close(),n.props.setAlbum(n.props.album)},n.handleOnEdit=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.viewRef.current.setState({date:t,caption:a}),n.props.setAlbumCallBack(n.props.album);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={picture:g.a,caption:"",date:"",modal:null,defPhotos:I},n.viewRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props!==e&&0!==this.props.photos.length){var t=document.querySelector(".carousel"),a=this.props.photos.length;B.numVisible=a%2===0?a-1:a,f.a.Carousel.init(t,B)}if(0===this.props.photos.length){var n=document.querySelector(".carousel");B.numVisible=5,f.a.Carousel.init(n,B)}}},{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".carousel"),a=f.a.Carousel.init(t,B);D.onCloseStart=function(){null!==e.viewRef.current.state.editPhotoModal&&e.viewRef.current.state.editPhotoModal.close()};var n=document.getElementById("modal1"),l=f.a.Modal.init(n,D);this.setState({modal:l,carousel:a})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{height:"100%"}},l.a.createElement(L,{current:this.state.picture,caption:this.state.caption,date:this.state.date,album:this.props.album,deleteCallBack:this.deleteCallBack,token:this.props.idtoken,ref:this.viewRef,handleOnEdit:this.handleOnEdit}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("h2",{style:{marginTop:"5%",marginBottom:"5%"}},this.props.album===me||void 0===this.props.album?"Album Preview":this.props.album+" Album")),l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"carousel",style:{height:"600px"}},this.props.photos.map((function(t){return l.a.createElement("a",{className:"carousel-item",href:"#!"},l.a.createElement("img",{"data-caption":t.caption,"data-date":t.date,alt:t.link,src:t.link,onClick:e.handleClick}))})),this.props.album===me?I.map((function(t){return l.a.createElement("a",{className:"carousel-item",href:"#!",key:t.picture},l.a.createElement("img",{"data-caption":t.caption,"data-date":t.date,alt:t.alt,src:t.picture,onClick:e.handleClick}))})):null))))}}]),a}(l.a.Component),F=a(21),K=a.n(F),q=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=n.createAlbumRef.current,t={idtoken:n.props.token,email:n.props.email,albumName:n.createAlbumRef.current.value};e.classList.contains("valid")&&e.classList.remove("valid"),e.classList.contains("invalid")&&e.classList.remove("invalid");var a=n.props.updateList;j.a.post("/createAlbum",t).then((function(t){e.classList.toggle("valid"),a(),console.log(t)})).catch((function(t){e.classList.toggle("invalid"),console.log(t)}))},n.handleKeyDown=function(e){"Enter"!==e.key?(n.createAlbumRef.current.classList.remove("valid"),n.createAlbumRef.current.classList.remove("invalid")):n.handleSubmit()},n.myRef=l.a.createRef(),n.createAlbumRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.myRef.current.scrollTo(0,0)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.myRef,id:"modal2",className:"modal",style:{marginTop:"30%",paddingTop:"20%",backgroundColor:"rgb(255, 255, 255, 0.95"}},l.a.createElement("div",{className:"modal-content",style:{width:"100%"}},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect",style:{display:"inline-block"}},"Close"),l.a.createElement("h4",null,"Add Album"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{ref:this.createAlbumRef,id:"albumName",type:"text",placeholder:"e.g. Memories",onKeyDown:this.handleKeyDown}),l.a.createElement("label",{htmlFor:"albumName"},"Album Name"),l.a.createElement("span",{className:"helper-text","data-error":"Album exists / is invalid.","data-success":"Album created!"}))),l.a.createElement("a",{href:"#!",onClick:this.handleSubmit,className:"waves-effect waves-light btn"},l.a.createElement("i",{className:"material-icons left"},"cloud"),"Submit")))}}]),a}(l.a.Component),U={width:"100%",textTransform:"none",background:"#ee6e73"},z=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleClick=function(t,a){e.props.handleSetAlbum(a)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{id:"display-albums",className:"modal",style:{marginTop:"30%",paddingTop:"20%",backgroundColor:"rgb(255, 255, 255, 0.95"}},l.a.createElement("div",{className:"modal-content",style:{width:"100%"}},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect",style:{display:"inline-block"}},"Close"),l.a.createElement("h4",null,"Display Albums"),l.a.createElement("div",{className:"row"},l.a.createElement("a",{style:U,onClick:function(t){return e.handleClick(t,"default")},href:"#!",className:"waves-effect btn"},"Default")),void 0!==this.props.albums?this.props.albums.map((function(t){return l.a.createElement("div",{className:"row"},l.a.createElement("a",{style:U,onClick:function(a){return e.handleClick(a,t)},href:"#!",className:"waves-effect btn"},t))})):null)))}}]),a}(l.a.Component),H={coverTrigger:!1},V=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=n.deleteAlbumRef.current,t={idtoken:n.props.token,albumName:n.deleteAlbumRef.current.value};e.classList.contains("valid")&&e.classList.remove("valid"),e.classList.contains("invalid")&&e.classList.remove("invalid");var a=n.props.updateList;j.a.post("/deleteAlbum",t).then((function(t){e.classList.toggle("valid"),a(),console.log(t)})).catch((function(t){e.classList.toggle("invalid"),console.log(t)}))},n.handleKeyDown=function(e){"Enter"!==e.key?(n.deleteAlbumRef.current.classList.remove("valid"),n.deleteAlbumRef.current.classList.remove("invalid")):n.handleSubmit()},n.myRef=l.a.createRef(),n.deleteAlbumRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("delete-album");f.a.Dropdown.init(e,H)}},{key:"componentDidUpdate",value:function(e,t,a){this.myRef.current.scrollTo(0,0)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.myRef,id:"delete-modal",className:"modal",style:{marginTop:"30%",paddingTop:"20%",backgroundColor:"rgb(255, 255, 255, 0.95"}},l.a.createElement("div",{className:"modal-content",style:{width:"100%"}},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect",style:{display:"inline-block"}},"Close"),l.a.createElement("h4",null,"Delete Album"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{ref:this.deleteAlbumRef,id:"albumNameToDelete",type:"text",placeholder:"e.g. Memories",onKeyDown:this.handleKeyDown}),l.a.createElement("label",{htmlFor:"albumName"},"Album Name"),l.a.createElement("span",{className:"helper-text","data-error":"Album does not exist.","data-success":"Album was deleted."}))),l.a.createElement("a",{id:"delete-album",href:"#!",className:"dropdown-trigger waves-effect waves-light red btn","data-target":"delete-dropdown"},l.a.createElement("i",{className:"material-icons left"},"delete"),"Submit"),l.a.createElement("ul",{id:"delete-dropdown",className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:this.handleSubmit},"Confirm Delete")))))}}]),a}(l.a.Component),W=a(29),G=a.n(W),J=a(45),Z=a.n(J),$={opacity:0},Q=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).closeModals=function(){n.state.addAlbumModal.close(),n.state.deleteModal.close(),n.state.displayModal.close()},n.handleClickAddAlbum=function(){n.state.addAlbumModal.open()},n.handleClickAddPhoto=function(){n.state.addPhotoModal.open(),j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albums:e.data})}))},n.handleBulk=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.props.triggerBulk(e.data)}));case 2:case"end":return e.stop()}}),e)}))),n.handleDeleteAlbum=function(e){n.state.deleteModal.open()},n.handleSetAlbum=function(e){n.props.setAlbumCallBack(e)},n.handleDisplayAlbum=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albums:e.data})}));case 2:n.state.displayModal.open();case 3:case"end":return e.stop()}}),e)}))),n.onSuccess=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getBasicProfile(),l=a.getImageUrl(),s=a.getName(),i=a.getEmail(),n.setState({isLoggedIn:!n.state.isLoggedIn,profilePicture:l,name:s,email:i,token:t.getAuthResponse().id_token}),n.createAlbumRef.current.classList.remove("disabled"),n.deleteAlbumRef.current.classList.remove("disabled"),n.displayAlbumRef.current.classList.remove("disabled"),n.addPhotosBulkRef.current.classList.remove("disabled"),n.props.getAuth({idtoken:n.state.token,email:n.state.email,googleUser:t}),e.next=12,j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albumsForDisplay:e.data})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFailure=function(e){console.log(e)},n.logout=function(){n.setState({isLoggedIn:!n.state.isLoggedIn,profilePicture:G.a,name:"",email:""}),n.props.getAuth({idtoken:"",email:"",googleUser:null}),n.createAlbumRef.current.classList.add("disabled"),n.deleteAlbumRef.current.classList.add("disabled"),n.displayAlbumRef.current.classList.add("disabled"),n.addPhotosBulkRef.current.classList.add("disabled"),n.props.removeAuthCallBack()},n.updateListCallBack=function(){j.a.get("/albums",{params:{idtoken:n.state.token,email:n.state.email}}).then((function(e){n.setState({albumsForDisplay:e.data})}))},n.state={isLoggedIn:!1,profilePicture:G.a,name:"",email:"",addAlbumModal:null,addPhotoModal:null,deleteModal:null,displayModal:null,token:"",albums:[],albumsForDisplay:[]},n.createAlbumRef=l.a.createRef(),n.deleteAlbumRef=l.a.createRef(),n.displayAlbumRef=l.a.createRef(),n.addPhotosBulkRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.state.isLoggedIn||(this.displayAlbumRef.current.classList.add("disabled"),this.deleteAlbumRef.current.classList.add("disabled"),this.createAlbumRef.current.classList.add("disabled"),this.addPhotosBulkRef.current.classList.add("disabled"));var e=document.getElementById("modal2"),t=f.a.Modal.init(e,$),a=document.getElementById("modal3"),n=f.a.Modal.init(a,$),l=document.getElementById("display-albums"),s=f.a.Modal.init(l,$),i=document.getElementById("delete-modal"),r=f.a.Modal.init(i,$);this.setState({addAlbumModal:t,addPhotoModal:n,displayModal:s,deleteModal:r});var c={onCloseStart:this.closeModals},o=document.querySelectorAll(".sidenav");f.a.Sidenav.init(o,c)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("nav",{className:"nav-extended"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#!",className:"logo paris",onClick:this.handleHome,style:{cursor:"pointer"}},"Stiny"),l.a.createElement("a",{href:"#!","data-target":"slide-out",className:"sidenav-trigger left waves-effect"},l.a.createElement("i",{style:{fontSize:"300%",color:"black"},className:"material-icons"},"menu")))),l.a.createElement("ul",{id:"slide-out",className:"sidenav"},l.a.createElement("li",null,l.a.createElement("div",{className:"user-view"},l.a.createElement("div",{className:"background"},l.a.createElement("img",{alt:"office-background",src:Z.a})),l.a.createElement("a",{href:"#user"},l.a.createElement("img",{alt:"profile",className:"circle",src:this.state.profilePicture})),l.a.createElement("a",{href:"#name"},l.a.createElement("span",{className:"white-text name"},this.state.name)),l.a.createElement("a",{href:"#email"},l.a.createElement("span",{className:"white-text email"},this.state.email)))),l.a.createElement("li",null,l.a.createElement("a",{ref:this.createAlbumRef,className:"waves-effect",href:"#!",disabled:!this.state.isLoggedIn,onClick:this.handleClickAddAlbum},l.a.createElement("i",{className:"material-icons"},"book"),"Create Album"),l.a.createElement(q,{token:this.state.token,email:this.state.email,updateList:this.updateListCallBack})),l.a.createElement("li",null,l.a.createElement("a",{onClick:this.handleDeleteAlbum,ref:this.deleteAlbumRef,className:"waves-effect",href:"#!"},l.a.createElement("i",{className:"material-icons"},"delete"),"Delete Album"),l.a.createElement(V,{token:this.state.token,updateList:this.updateListCallBack})),l.a.createElement("li",null,l.a.createElement("a",{ref:this.displayAlbumRef,onClick:this.handleDisplayAlbum,className:"dropdown-trigger waves-effect","data-target":"dropdownDisplay",id:"display",href:"#!",disabled:!this.state.isLoggedIn},l.a.createElement("i",{className:"material-icons"},"tv"),"Display Album"),l.a.createElement(z,{token:this.state.token,albums:this.state.albums,handleSetAlbum:this.handleSetAlbum})),l.a.createElement("li",null,l.a.createElement("a",{ref:this.addPhotosBulkRef,className:"waves-effect",href:"#!",onClick:this.handleBulk},l.a.createElement("i",{className:"material-icons"},"insert_photo"),"Add Photos")),l.a.createElement("li",null,l.a.createElement("div",{className:"divider"})),l.a.createElement("li",null,l.a.createElement(K.a,{className:"google-button",clientId:"844946981534-vkdij9ke3polifnu5qsveogtlp2etuj9.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.onSuccess,onFailure:this.onFailure,cookiePolicy:"single_host_origin",disabled:this.state.isLoggedIn,isSignedIn:!0}),l.a.createElement(F.GoogleLogout,{className:"google-button",clientId:"844946981534-vkdij9ke3polifnu5qsveogtlp2etuj9.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:this.logout,disabled:!this.state.isLoggedIn})),l.a.createElement("li",null,l.a.createElement("a",{href:"#!",className:"subheader"},"Built With Materialize CSS"))))}}]),a}(l.a.Component),X=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s1 m1 l4"}),l.a.createElement("div",{className:"col s10 m10 l4"},l.a.createElement("img",{style:{width:"100%"},alt:"preview",className:"preview",src:N.a})),l.a.createElement("div",{className:"col s1 m1 l4"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s1 m2"}),l.a.createElement("div",{className:"col s10 m8"},l.a.createElement("p",{className:"bio"},"Hi!"),l.a.createElement("p",{className:"bio"},"My name is Steven, and I developed this website for my girlfriend, Ciny, and me to use for several things. We thought it'd be a great idea to save memorable photos and cooking recipes somewhere we can easily access. This website's source code can be found below: "),l.a.createElement("a",{href:"https://github.com/sensui7/stiny-prod"},"GitHub Repository")),l.a.createElement("div",{className:"col s1 m2"})))}}]),a}(l.a.Component),Y=a(22),ee=sessionStorage.getItem("content"),te={coverTrigger:!1},ae=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleEditorChange=function(e){var t;t=e.target.getContent(),sessionStorage.setItem("content",t),n.setState({content:e.target.getContent()})},n.handleSubmit=function(){var e=n.recipeNameRef.current.value;if(""===e)return n.recipeNameRef.current.classList.add("invalid"),void n.setState({addRecipeMessage:"Please enter a recipe name."});n.recipeNameRef.current.classList.remove("valid"),n.recipeNameRef.current.classList.remove("invalid");var t={recipeName:e,data:n.state.content,idtoken:n.props.idtoken};j.a.post("/addRecipe",t).then((function(e){n.recipeNameRef.current.classList.add("valid"),j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({recipes:e})}),(function(e){}))}),(function(e){n.recipeNameRef.current.classList.add("invalid"),404===e.response.status?n.setState({addRecipeMessage:"Please connect to the internet to use this feature."}):400===e.response.status?n.setState({addRecipeMessage:"Account login status expired. Please logout and login."}):500===e.response.status?n.setState({addRecipeMessage:"Recipe name already exists."}):403===e.response.status&&n.setState({addRecipeMessage:"Only admins are authorized to add a recipe."})}))},n.handleKeydown=function(e){n.recipeNameRef.current.classList.remove("valid"),n.recipeNameRef.current.classList.remove("invalid")},n.handleDelete=function(e,t){var a={recipeName:t,idtoken:n.props.idtoken};j.a.post("/deleteRecipe",a).then((function(e){j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({recipes:e})}),(function(e){}))}),(function(e){console.log(e)}))},n.recipeNameRef=l.a.createRef(),n.editorRef=l.a.createRef(),n.submitRef=l.a.createRef(),n.state={addRecipeMessage:"",recipes:[],content:""},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){""!==this.props.idtoken?(this.submitRef.current.classList.remove("disabled"),document.querySelectorAll(".recipes").forEach((function(e){return e.classList.remove("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.remove("disabled")}))):(this.submitRef.current.classList.add("disabled"),document.querySelectorAll(".recipes").forEach((function(e){return e.classList.add("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.add("disabled")})));var n=document.querySelectorAll(".collapsible");f.a.Collapsible.init(n);var l=document.querySelectorAll(".recipes");f.a.Dropdown.init(l,te)}},{key:"componentDidMount",value:function(){var e=this;this.setState({content:ee});var t=document.querySelectorAll(".collapsible");f.a.Collapsible.init(t);var a=document.querySelectorAll(".recipes");f.a.Dropdown.init(a,te);var n=""!==this.props.idtoken;j.a.get("/getAllRecipes",{params:{idtoken:this.props.idtoken}}).then((function(t){e.setState({recipes:t}),n||(document.querySelectorAll(".recipes").forEach((function(e){return e.classList.add("disabled")})),document.querySelectorAll(".edit-recipes").forEach((function(e){return e.classList.add("disabled")})))}),(function(e){}))}},{key:"render",value:function(){var e=this,t=[];return 0!==this.state.recipes.length&&this.state.recipes.data.forEach((function(e){t.push(e)})),l.a.createElement("div",{className:"row"},l.a.createElement("ul",{className:"collapsible popout"},l.a.createElement("li",null,l.a.createElement("div",{className:"collapsible-header"},l.a.createElement("i",{className:"material-icons"},"playlist_add"),"Add Recipe"),l.a.createElement("div",{className:"collapsible-body"},l.a.createElement(Y.a,{ref:this.editorRef,initialValue:ee||null,apiKey:"p234ptga2jzgn5mia4hnruilh2zzuhfchjd7ja98rwu5p6g4",init:{contextmenu:!1,browser_spellcheck:!0,height:500,selector:"textarea",plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | fontselect | fontsize | forecolor | backcolor | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | help",paste_enable_default_filters:!1,paste_word_valid_elements:"b,strong,i,em,h1,h2,h3,h4,h5"},onChange:this.handleEditorChange}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s3"}),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("input",{ref:this.recipeNameRef,id:"recipename",type:"text",onKeyDown:this.handleKeydown}),l.a.createElement("label",{htmlFor:"recipename"},"Recipe Name"),l.a.createElement("span",{className:"helper-text","data-error":this.state.addRecipeMessage,"data-success":"Recipe created!"})),l.a.createElement("div",{className:"col s3"})),l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:this.handleSubmit,ref:this.submitRef},"Submit",l.a.createElement("i",{className:"material-icons right"},"send")))),t.map((function(t){return l.a.createElement("li",null,l.a.createElement("div",{className:"collapsible-header"},l.a.createElement("i",{className:"material-icons"},"menu_book"),t.name),l.a.createElement("div",{className:"collapsible-body instructions"},l.a.createElement("div",{className:"row"},l.a.createElement("a",{className:"dropdown-trigger btn right red recipes",href:"#!","data-target":t.name},"Delete Recipe"),l.a.createElement("a",{className:"btn right waves-effect edit-recipes",href:"#!","data-target":t.name,onClick:function(a){return e.props.triggerEdit(a,t.data,t.name)}},"Edit Recipe")),l.a.createElement("ul",{id:t.name,className:"dropdown-content"},l.a.createElement("li",null,l.a.createElement("a",{href:"#!",onClick:function(a){return e.handleDelete(a,t.name)}},"Confirm"))),l.a.createElement("div",{className:"recipe-display",dangerouslySetInnerHTML:{__html:t.data}})))}))))}}]),a}(l.a.Component),ne=a(47),le=a.n(ne),se=a(17),ie=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onDrop=function(e){n.setState({pictures:n.state.pictures.concat(e),uploaderKey:n.state.uploaderKey+1})},n.handleRemove=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({pictures:n.state.pictures.filter((function(e){return e!==a})),uploaderKey:n.state.uploaderKey+1});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleSubmit=function(){var e={dates:document.getElementsByClassName("date-input"),captions:document.getElementsByClassName("desc-input"),pictures:n.state.pictures};n.props.sendData(e)},n.state={pictures:[],uploaderKey:0},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(le.a,{withIcon:!0,buttonText:"Choose Images",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".tif",".tiff"],maxFileSize:5242880,key:this.state.uploaderKey}),0===this.state.pictures.length?null:this.state.pictures.map((function(t,a){return l.a.createElement("div",{className:"row",key:a},l.a.createElement("div",{className:"col l1"},l.a.createElement(se.Button,{onClick:function(a){return e.handleRemove(a,t)},style:{marginTop:"100%"},className:"btn-floating red waves-effect"},l.a.createElement("i",{className:"material-icons"},"remove"))),l.a.createElement("div",{className:"col l5"},l.a.createElement("img",{alt:"#!",style:{maxWidth:"50%",maxHeight:"50%"},src:URL.createObjectURL(t)})),l.a.createElement("div",{className:"col l6"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:a+" date",type:"text",className:"date-input"}),l.a.createElement("label",{htmlFor:"date"},"Date")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{id:a+" desc",type:"text",className:"desc-input"}),l.a.createElement("label",{htmlFor:"desc"},"Caption"))))})),l.a.createElement(se.Button,{className:"waves-effect",onClick:this.handleSubmit},"Submit"))}}]),a}(l.a.Component),re=a(48),ce=a.n(re),oe={"Content-Type":"multipart/form-data"},ue=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSelect=function(e){n.setState({selectedAlbum:e.target.value,message:""})},n.sendData=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({message:""}),""!==n.state.selectedAlbum){e.next=4;break}return n.setState({message:"Please make sure an album is selected."}),e.abrupt("return");case 4:if(0!==t.pictures.length){e.next=8;break}return e.next=7,n.setState({message:"Please add some photos before uploading them!"});case 7:return e.abrupt("return");case 8:return e.next=10,n.setState({loading:!0});case 10:a=0;case 11:if(!(a<t.pictures.length)){e.next=27;break}return(l=new FormData).append("idtoken",n.props.idtoken),l.append("albumName",n.state.selectedAlbum),l.append("caption",t.captions[a].value),l.append("date",t.dates[a].value),l.append("image",t.pictures[a]),e.next=20,j.a.post("/addPhoto",l,{headers:oe}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",200);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return 403===e.response.status?n.setState({message:"Could not add photo! Album does not exist."}):400===e.response.status?n.setState({message:"Could not add photo! Try relogging into your account."}):404===e.response.status&&n.setState({message:"Please connect to the internet to use this feature."}),e.response.status}));case 20:if(200===e.sent){e.next=24;break}return n.setState({loading:!1}),e.abrupt("return");case 24:++a,e.next=11;break;case 27:n.setState({loading:!1,message:"Successfully added photos to "+n.state.selectedAlbum+" album!"}),n.props.setAlbumCallBack(n.props.album);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={selectedAlbum:"",message:"",loading:!1},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){if(e.albumsList!==this.props.albumsList){var n=document.querySelectorAll("select");f.a.FormSelect.init(n)}}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{id:"bulk",className:"modal arg"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h4",null,"Add Photos"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("select",{defaultValue:this.state.selectedAlbum,onChange:this.handleSelect},l.a.createElement("option",{value:"",disabled:!0},"Choose Album"),this.props.albumsList?this.props.albumsList.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})):null))),l.a.createElement(ie,{sendData:this.sendData}),l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(ce.a,{size:10,color:"#123abc",loading:this.state.loading}),l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:"helper-text"},this.state.message)))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"Exit"))))}}]),a}(l.a.Component),de=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSubmit=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={idtoken:n.props.idtoken,recipeName:n.props.recipeName,data:n.editorRef.current.editor.getContent()},e.next=3,j.a.post("/updateRecipe",t).then((function(e){n.props.recipeEditCallback()}),(function(e){console.log("Unsuccessful update")}));case 3:case"end":return e.stop()}}),e)}))),n.editorRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.recipeToEdit;return l.a.createElement("div",{id:"edit-recipe",className:"modal arg"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("h4",null,"Edit Recipe"),l.a.createElement(Y.a,{key:e,ref:this.editorRef,value:e,apiKey:"p234ptga2jzgn5mia4hnruilh2zzuhfchjd7ja98rwu5p6g4",init:{contextmenu:!1,browser_spellcheck:!0,height:500,selector:"textarea",plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | fontselect | fontsize | forecolor | backcolor | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | help",paste_enable_default_filters:!1,paste_word_valid_elements:"b,strong,i,em,h1,h2,h3,h4,h5"}}),l.a.createElement("br",null),l.a.createElement(se.Button,{waves:"light",onClick:this.handleSubmit},"Submit Changes")),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"Exit")))}}]),a}(l.a.Component),me=(a(127),a(128),"default"),pe=["Please login to use this feature.","No album was found with any photos.","Make sure you're connected to the internet."],he=1,fe=2,be=3,ve=["Photos","Cooking","Home"],ge=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authCallBack=function(e){n.setState({idtoken:e.idtoken,email:e.email,googleUser:e.googleUser,searchStatus:""})},n.removeAuthCallBack=function(){n.setState({idtoken:"",email:"",searchStatus:""})},n.setAlbumCallBack=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/albumPhotos",{params:{idtoken:n.state.idtoken,albumName:t}}).then((function(e){e.data[0]&&e.data[0].album&&0!==e.data[0].album.length?n.setState({currAlbum:t,photos:e.data[0].album,searchStatus:""}):n.setState({currAlbum:me,photos:[],searchStatus:pe[1]})}),(function(e){400===e.response.status?n.setState({searchStatus:pe[0]}):404===e.response.status&&n.setState({searchStatus:pe[2]})}));case 2:return e.next=4,n.setState({currentTab:fe});case 4:n.menuRef.current.photosRef.current.click();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.clearCallback=function(){n.setState({searchStatus:""})},n.handleHome=function(){n.setState({currentTab:he,pageName:ve[2]})},n.menuBarCallBack=function(e){var t=null;e===ve[0]?(e=fe,t=0):e===ve[1]?(e=be,t=1):e===ve[2]&&(e=he,t=2),n.setState({currentTab:e,pageName:ve[t]})},n.triggerEdit=function(){var e=Object(o.a)(c.a.mark((function e(t,a,l){var s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=document.getElementById("edit-recipe"),i=f.a.Modal.init(s),e.next=4,n.setState({recipeToEdit:a,recipeName:l,editModal:i});case 4:i.open();case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.recipeEditCallback=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/getAllRecipes",{params:{idtoken:n.props.idtoken}}).then((function(e){n.setState({forceKey:n.state.forceKey+1})}),(function(e){}));case 2:n.state.editModal.close();case 3:case"end":return e.stop()}}),e)}))),n.triggerBulk=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.getElementById("bulk"),l=f.a.Modal.init(a),e.next=4,n.setState({albumsList:t});case 4:l.open();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={idtoken:"",email:"",currAlbum:me,photos:[],searchStatus:"",currentTab:he,pageName:ve[2],recipeToEdit:"",recipeName:"",editModal:null,forceKey:0,albumsList:[],googleUser:null},n.menuRef=l.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state.googleUser;this.interval=setInterval((function(){null!==t&&t.reloadAuthResponse().then((function(t){e.setState({idtoken:t.id_token})}),(function(e){console.log(e)}))}),33e5)}},{key:"render",value:function(){return l.a.createElement("div",{className:"App",style:{background:"#FFFAFA"}},l.a.createElement(Q,{getAuth:this.authCallBack,removeAuthCallBack:this.removeAuthCallBack,setAlbumCallBack:this.setAlbumCallBack,album:this.state.currAlbum,triggerBulk:this.triggerBulk}),l.a.createElement(b,{menuBarCallBack:this.menuBarCallBack,ref:this.menuRef}),this.state.currentTab===fe?l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m1 l3"}),l.a.createElement("div",{className:"col s12 l6 m10"},l.a.createElement(_,{setAlbum:this.setAlbumCallBack,idtoken:this.state.idtoken,email:this.state.email,album:this.state.currAlbum,photos:this.state.photos,setAlbumCallBack:this.setAlbumCallBack})),l.a.createElement("div",{className:"col m1 l3"}))):null,this.state.currentTab===he?l.a.createElement(X,null):null,this.state.currentTab===be?l.a.createElement(ae,{idtoken:this.state.idtoken,triggerEdit:this.triggerEdit,key:this.state.forceKey}):null,l.a.createElement(de,{recipeToEdit:this.state.recipeToEdit,idtoken:this.state.idtoken,recipeName:this.state.recipeName,recipeEditCallback:this.recipeEditCallback}),l.a.createElement(ue,{albumsList:this.state.albumsList,idtoken:this.state.idtoken,setAlbumCallBack:this.setAlbumCallBack}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},16:function(e,t,a){e.exports=a.p+"static/media/3.86e83c97.jpg"},23:function(e,t,a){e.exports=a.p+"static/media/1.8d68a31f.jpg"},26:function(e,t,a){e.exports=a.p+"static/media/2.6e2d9591.jpg"},27:function(e,t,a){e.exports=a.p+"static/media/4.51c24f85.jpg"},28:function(e,t,a){e.exports=a.p+"static/media/5.7baa8c77.jpg"},29:function(e,t,a){e.exports=a.p+"static/media/default.3ab90553.png"},31:function(e,t,a){},45:function(e,t,a){e.exports=a.p+"static/media/office.f642206b.jpg"},50:function(e,t,a){e.exports=a(129)},56:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.05c1608d.chunk.js.map